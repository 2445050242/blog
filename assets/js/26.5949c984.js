(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{528:function(e,t,a){"use strict";a.r(t);var s=a(4),l=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"细节点或者问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#细节点或者问题"}},[e._v("#")]),e._v(" 细节点或者问题")]),e._v(" "),a("ul",[a("li",[e._v("组件之间如何传递值")]),e._v(" "),a("li",[e._v("taro页面如何设置config")]),e._v(" "),a("li",[e._v("组件全部使用函数组件还是各占一部分")])]),e._v(" "),a("h2",{attrs:{id:"注意点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[e._v("#")]),e._v(" 注意点")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("只能在最外层使用hooks，不然可能会导致执行循序错乱")])]),e._v(" "),a("li",[a("p",[e._v("只能在React的函数组件中或者自定义Hooks中调用hooks")])]),e._v(" "),a("li",[a("p",[e._v("useEffect可以返回一个清理函数，也可以传递第二个参数来决定是否更新，如果数组中有多个元素，即使只有一个元素发生变化，React 也会执行 effect")])]),e._v(" "),a("li",[a("p",[e._v("如果想执行只运行一次的 effect（仅在组件挂载和卸载时执行），可以传递一个空数组（[]）作为第二个参数")])]),e._v(" "),a("li",[a("p",[e._v("自定义Hooks必须以"),a("code",[e._v("use")]),e._v("开头，并且不会共享state，完全独立")])]),e._v(" "),a("li",[a("p",[e._v("根据state变量是否有联系决定是拆分state还是使用单个state")])]),e._v(" "),a("li",[a("p",[e._v("对于deps依赖过多问题：")]),e._v(" "),a("ul",[a("li",[e._v("需要将逻辑进行拆分")]),e._v(" "),a("li",[e._v("若逻辑已无法拆分，但deps仍然过多，则需要考虑将state进行合并")]),e._v(" "),a("li",[e._v("如果state不能合并，在 callback 内部又使用了 setState 方法，那么可以考虑使用 setState callback 来减少一些依赖")])])])]),e._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("将完全不相关的 state 拆分为多组 state")])]),e._v(" "),a("li",[a("p",[e._v("如果某些 state 是相互关联的，或者需要一起发生改变，就可以把它们合并为一组 state")])]),e._v(" "),a("li",[a("p",[e._v("依赖数组依赖的值最好不要超过 3 个，否则会导致代码会难以维护")])]),e._v(" "),a("li",[a("p",[e._v("如果发现依赖数组依赖的值过多，我们应该采取一些方法来减少它")]),e._v(" "),a("ul",[a("li",[e._v("去掉不必要的依赖")]),e._v(" "),a("li",[e._v("将 Hook 拆分为更小的单元，每个 Hook 依赖于各自的依赖数组")]),e._v(" "),a("li",[e._v("通过合并相关的 state，将多个依赖值聚合为一个")]),e._v(" "),a("li",[e._v("通过 setState 回调函数获取最新的 state，以减少外部依赖")]),e._v(" "),a("li",[e._v("通过 ref 来读取可变变量的值，不过需要注意控制修改它的途径")])])]),e._v(" "),a("li",[a("p",[e._v("应该使用 useMemo 的场景：")]),e._v(" "),a("ul",[a("li",[e._v("保持引用相等")]),e._v(" "),a("li",[e._v("成本很高的计算")])])]),e._v(" "),a("li",[a("p",[e._v("无需使用 useMemo 的场景：")]),e._v(" "),a("ul",[a("li",[e._v("如果返回的值是原始值： string, boolean, null, undefined, number, symbol（不包括动态声明的 Symbol），一般不需要使用 useMemo")]),e._v(" "),a("li",[e._v("仅在组件内部用到的 object、array、函数等（没有作为 props 传递给子组件），且没有用到其他 Hook 的依赖数组中，一般不需要使用 useMemo")])])]),e._v(" "),a("li",[a("p",[e._v("Hooks、Render Props 和高阶组件都有各自的使用场景，具体使用哪一种要看实际情况")])]),e._v(" "),a("li",[a("p",[e._v("若 Hook 类型相同，且依赖数组一致时，应该合并成一个 Hook")])]),e._v(" "),a("li",[a("p",[e._v("自定义 Hooks 的返回值可以使用 Tuple 类型，更易于在外部重命名。如果返回的值过多，则不建议使用")])]),e._v(" "),a("li",[a("p",[e._v("ref 不要直接暴露给外部使用，而是提供一个修改值的方法")])]),e._v(" "),a("li",[a("p",[e._v("在使用 useMemo 或者 useCallback 时，可以借助 ref 或者 setState callback，确保返回的函数只创建一次。也就是说，函数不会根据依赖数组的变化而二次创建")])]),e._v(" "),a("li",[a("p",[e._v("Function Component 每次渲染都会重新执行，常量推荐放到函数外层避免性能问题，函数推荐使用 useCallback 申明")])]),e._v(" "),a("li",[a("p",[e._v("所有 Function Component 内函数必须用 React.useCallback 包裹，以保证准确性与性能")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const [hide, setHide] = React.useState(false);\n\nconst handleClick = React.useCallback(() => {\n  setHide(isHide => !isHide)\n}, [])\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])])]),e._v(" "),a("li",[a("p",[e._v("简单的组件间通信使用透传 Props 变量的方式，而频繁组件间通信使用 React.useContext")])])]),e._v(" "),a("h2",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[e._v("#")]),e._v(" 参考文档")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/85969406",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Hooks 你真的用对了吗？"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/357020049",target:"_blank",rel:"noopener noreferrer"}},[e._v("如何去合理使用 React hook？"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/81752821",target:"_blank",rel:"noopener noreferrer"}},[e._v("精读《React Hooks 最佳实践》"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/92211533",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Hooks完全上手指南"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/94030173",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Hooks 在蚂蚁金服的实践"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/98554943",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Hooks(二): useCallback 之痛"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=l.exports}}]);