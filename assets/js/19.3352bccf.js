(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{520:function(s,n,a){"use strict";a.r(n);var e=a(4),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"覆盖配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#覆盖配置"}},[s._v("#")]),s._v(" 覆盖配置")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("安装插件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\x3c!--安装插件--\x3e\nnpm i react-app-rewired -D\nnpm install customize-cra --save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("更改一下"),a("code",[s._v("package.json")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('\x3c!--修改启动方式--\x3e\n"scripts": {\n-   "start": "react-scripts start",\n+   "start": "react-app-rewired start",\n-   "build": "react-scripts build",\n+   "build": "react-app-rewired build",\n-   "test": "react-scripts test --env=jsdom",\n+   "test": "react-app-rewired test --env=jsdom",\n}\n\x3c!--添加babel--\x3e\n"babel": {\n    "plugins": [\n      [\n        "@babel/plugin-proposal-decorators",\n        {\n          "legacy": true\n        }\n      ],\n      [\n        "@babel/plugin-proposal-class-properties",\n        {\n          "loose": true\n        }\n      ]\n    ],\n    "presets": [\n      "react-app"\n    ]\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建"),a("code",[s._v("config-overrides.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\x3c!--配置支持装饰器--\x3e\nconst { override, useBabelRc } = require('customize-cra');\n\nmodule.exports = override(\n  useBabelRc()\n)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"注意点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[s._v("#")]),s._v(" 注意点")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("如果你想响应式的产生一个可以被其它"),a("code",[s._v("observer")]),s._v("使用的值，请使用"),a("code",[s._v("@computed")]),s._v("，如果你不想产生一个新值，而想要达到一个效果，请使用"),a("code",[s._v("autorun")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("reaction")]),s._v("用法:")]),s._v(" "),a("p",[s._v("它 返回一个清理函数。接收两个函数参数，第一个(数据函数)是用来追踪并返回数据作为第二个函数(效果函数)的输入。传入"),a("code",[s._v("reaction")]),s._v("的第二个函数(副作用函数)当调用时会接收两个参数。第一个参数是由"),a("code",[s._v("data")]),s._v("函数返回的值。第二个参数是当前的"),a("code",[s._v("reaction")]),s._v("，可以用来在执行期间清理"),a("code",[s._v("reaction")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('reaction(() => data, (data, reaction) => { sideEffect }, options?)\n\n// 示例: 对 length 和 title 的变化作出反应\nconst reaction2 = reaction(\n    () => todos.map(todo => todo.title),\n    (titles, reaction) => {\n        console.log("reaction 2:", titles.join(", "));\n        \x3c!--使用下面这句代码就能清理reaction--\x3e\n        reaction.dispose();   \n    }\n);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("action.bound")]),s._v("不要和箭头函数一起使用；箭头函数已经是绑定过的并且不能重新绑定")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("action")]),s._v("包装/装饰器只会对当前运行的函数作出反应，而不会对当前运行函数所调用的函数（不包含在当前函数之内）作出反应！这意味着如果"),a("code",[s._v("action")]),s._v("中存在 "),a("code",[s._v("setTimeout")]),s._v("、"),a("code",[s._v("promise")]),s._v("的"),a("code",[s._v("then")]),s._v("或"),a("code",[s._v("async")]),s._v("语句，并且在回调函数中某些状态改变了，那么这些回调函数也应该包装在"),a("code",[s._v("action")]),s._v("中。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("action")]),s._v("仅仅作用于当前运行的函数，而不能作用于当前函数调用的函数。这意味着在一些定时器或者网络请求，异步处理的情况下，它们的回调函数无法对状态做成改变。这些回调函数都应该有"),a("code",[s._v("action")]),s._v("包裹，如果例子里面的"),a("code",[s._v("createRandomContact-callback")]),s._v("一样。但是，如果你使用了"),a("code",[s._v("async/await")]),s._v("的话，最好的方式应该是使用"),a("code",[s._v("runInAction")]),s._v("来让它变得更加简单")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@action /*optional*/ updateDocument = async () => {\n    const data = await fetchDataFromUrl();\n    /* required in strict mode to be allowed to update state: */\n    runInAction("update state after fetching data", () => {\n        this.data.replace(data);\n        this.isSaving = true;\n    })\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("由一个stores保持有对所有子store的引用,接着使用Provider组件将stores传递给父组件。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import CountStore from './mobx/CountStore'\nimport ChangeNameStore from './mobx/ChangeNameStore'\nconst countStore = new CountStore();\nconst changeNameStore = new ChangeNameStore();\nconst stores = {\n    countStore,\n    changeNameStore,\n}\nclass App extends Component {\n    render() {\n        return (\n            <Provider {...stores}>\n                <Home/>\n            </Provider>\n        );\n    }\n}\nexport default App;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("使用inject是自组件可以访问store")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const ChangeName = inject("changeNameStore")(observer( ( {changeNameStore} ) => {\n    return (\n        <div className=\'Change\'>\n            <div>{changeNameStore.name}</div>\n            <div className="buttons">\n                <Button type="primary" className="btn" onClick={() =>\n                    changeNameStore.changeName()\n                }>change</Button>\n            </div>\n        </div>\n    );\n}))\n\nexport default ChangeName;\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("跨域配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('\x3c!--在package.json文件中添加proxy--\x3e\n"proxy":"http://huodong.4399.com/dm/ndj/"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])])}),[],!1,null,null,null);n.default=t.exports}}]);